var JamaAPI = require('jama-rest-api');

var Jama = new JamaAPI({
    restURL: 'http://localhost:9999',
    username: 'sample',
    password: 'password'
});

var JamaItemProxy = {
    getChildren: function(itemId, cb) {
        Jama.items.getChildren(itemId).end(function(err, res) {
            cb(err, res);
        });
    },
    updateItem: function(itemId, data, cb) {
        Jama.items.update(itemId, data).end(function(err, res) {
            cb(err, res);
        })
    },
    getItemType: function(itemType, cb) {
        Jama.itemtypes.get(itemType).end(function(err, res) {
            cb(err, res);
        });
    },
    getProjects: function(cb) {
        Jama.projects.get(null, {maxResults: 500}).end(function(err, res) {
            cb(err, res.body.data);
        });
    },
    getItem: function(itemId, cb) {
        Jama.items.get(itemId).end(function(err, res) {
            cb(err, res);
        })
    },
    getPicklistOptions: function(pickListId, cb) {
        Jama.picklists.options(pickListId).end(function(err, res) {
            cb(err, res.body.data);
        })
    },
    getAllReleases: function(projectId, cb) {
        Jama.releases.getProjectReleases(projectId).end(function(err, res) {
            cb(err, res.body.data);
        })
    },
    loadCommentsForItem: function(itemId, cb) {
        Jama.items.getComments(itemId).end(function(err, res) {
            cb(err, res.body.data);
        })
    }
}

module.exports = JamaItemProxy;