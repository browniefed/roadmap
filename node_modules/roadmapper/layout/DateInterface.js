var LayoutManager = require('./LayoutManager'),
    moment = require('moment');

    function dateToLayoutFields(_scale, start, end) {
        var mStart = moment(start),
            mEnd = moment(end),
            scale = _scale || {};

        var startDiff = (moment(scale.start).diff(mStart, 'days')),
            endDiff = (moment(scale.end).diff(mEnd, 'days') * -1);

            startDiff = startDiff < 0 ? startDiff * -1 : 0;
        return {
            x: +startDiff,
            w: +(endDiff - startDiff)
        }
    }

    function datesFromLayoutItem(opts) {
        var dates = {};

        dates[opts.fields.start] = moment(opts.start).add(opts.layoutItem.x - opts.offset , 'days').format(opts.format);
        dates[opts.fields.end] = moment(opts.start).add((opts.layoutItem.x - opts.offset) + opts.layoutItem.w, 'days').format(opts.format);

        return dates;
    }

var DateInterace = {
    dateToLayoutFields: dateToLayoutFields,
    datesFromLayoutItem: datesFromLayoutItem
}

module.exports = DateInterace;